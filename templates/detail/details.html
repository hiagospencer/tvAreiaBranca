{% extends 'assistant/base.html' %}
{% load static %}

{% block title %}{{ post.titulo }} | Tv Areia Branca{% endblock %}
{% block description %}{{ post.descricao|truncatewords:30 }}{% endblock %}
{% block keywords %}{{ post.titulo }}, Areia Branca, RN, política, esporte, tvareiabranca{% endblock %}
{% block canonical %}{{ request.path }}{% endblock %}

{% block og_type %}article{% endblock %}
{% block og_title %}{{ post.titulo }}{% endblock %}
{% block og_description %}{{ post.descricao|truncatewords:30 }}{% endblock %}
{% block og_url %}{{ request.path }}{% endblock %}
{% block og_image %}https://tvareiabranca.com.br{{ post.imagem.url }}{% endblock %}

{% block twitter_title %}{{ post.titulo }}{% endblock %}
{% block twitter_description %}{{ post.descricao|truncatewords:30 }}{% endblock %}
{% block twitter_image %}https://tvareiabranca.com.br{{ post.imagem.url }}{% endblock %}
{% block content %}
<main class="article-detail">
    <div class="container">
        <div class="article-header">
            <h1>{{ post.titulo }}</h1>
            <div class="article-meta">
                <span class="author">Por <strong>{{ post.autor.nome}}</strong></span>
                <span class="date"><i class="far fa-clock"></i> {{ post.data_publicacao }}</span>
                <!-- <span class="views"><i class="far fa-eye"></i> {{ post.visualizacoes }} visualizações</span> -->
            </div>
            <div class="social-share">
                <span>Compartilhar:</span>
                <a href="#" class="facebook" title="Compartilhar no Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="twitter" title="Compartilhar no Twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" class="whatsapp" title="Compartilhar no WhatsApp"><i class="fab fa-whatsapp"></i></a>
                <a href="#" class="linkedin" title="Compartilhar no LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                <a href="#" class="telegram" title="Compartilhar no Telegram"><i class="fab fa-telegram-plane"></i></a>
            </div>
            <br><br>
            <img src="{% static 'img/anuncio3.gif' %}" alt="" style="margin-bottom: 30px;">
        </div>

        <div class="article-content">
            <div class="featured-image">
                <img src="{{ post.imagem.url }}" alt="{{ post.titulo }}">
            </div>

            <div class="article-body">
                <p class="lead">{{ post.descricao | safe }}</p>
            </div>

            <div class="article-footer">
                <div class="author-box">
                    <div class="author-image">
                        {% if post.autor.imagem %}
                        <img src="{{ post.autor.imagem.url }}" alt="{{post.autor.nome}}">
                        {% endif %}
                    </div>
                    <div class="author-info">
                        <h3>{{post.autor.nome}}</h3>
                        <p>{{post.autor.descricao | safe }}.</p>
                    </div>
                </div>

                <div class="social-share bottom">
                    <span>Compartilhe esta matéria:</span>
                    <a href="#" class="facebook" title="Compartilhar no Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="twitter" title="Compartilhar no Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="whatsapp" title="Compartilhar no WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    <a href="#" class="linkedin" title="Compartilhar no LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    <a href="#" class="telegram" title="Compartilhar no Telegram"><i
                            class="fab fa-telegram-plane"></i></a>
                </div>
            </div>
        </div>
        <br><br>
        <div class="anuncio" style="width: 100%;">
            <img src="{% static 'img/anuncio1.gif' %}" alt=""
                style="width: 100%; margin: 0 auto 30px auto; display: block;">
        </div>
        {% include 'related_news/related_news.html' %}
    </div>
</main>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const socialLinks = document.querySelectorAll(".social-share a");

        // Dados vindos do Django
        const articleTitle = encodeURIComponent("{{ post.titulo }}");
        const articleUrl = encodeURIComponent("https://tvareiabranca.com.br{{ request.path }}");

        socialLinks.forEach((link) => {
            link.addEventListener("click", function (e) {
                e.preventDefault();
                let shareUrl = "";

                if (this.classList.contains("facebook")) {
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${articleUrl}`;
                } else if (this.classList.contains("twitter")) {
                    shareUrl = `https://twitter.com/intent/tweet?text=${articleTitle}&url=${articleUrl}`;
                } else if (this.classList.contains("whatsapp")) {
                    shareUrl = `https://api.whatsapp.com/send?text=${articleTitle} ${articleUrl}`;
                } else if (this.classList.contains("linkedin")) {
                    shareUrl = `https://www.linkedin.com/shareArticle?mini=true&url=${articleUrl}&title=${articleTitle}`;
                } else if (this.classList.contains("telegram")) {
                    shareUrl = `https://t.me/share/url?url=${articleUrl}&text=${articleTitle}`;
                }

                window.open(shareUrl, "_blank", "width=600,height=400");
            });
        });
    });
</script>
{% endblock content %}
