{% load static %}

<div class="sponsors-section">
    <div class="sponsors-carousel-container">
        <div class="sponsors-track" id="sponsorsTrack">
            <!-- Primeira cópia dos logos -->

            {% for patrocinador in patrocinadores %}
            <div class="sponsor-item">
                <img src="{{ patrocinador.imagem.url }}" alt="{{ patrocinador.nome }}" loading="lazy">
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const track = document.getElementById('sponsorsTrack');
        const sponsors = track.querySelectorAll('.sponsor-item');

        // Duplica os itens para criar o efeito infinito
        sponsors.forEach(sponsor => {
            const clone = sponsor.cloneNode(true);
            track.appendChild(clone);
        });

        // Configura a animação com JavaScript
        let animation;

        function startAnimation() {
            const itemWidth = sponsors[ 0 ].offsetWidth + 40; // width + gap
            const totalWidth = itemWidth * sponsors.length;

            track.style.width = totalWidth * 2 + 'px';

            animation = track.animate([
                { transform: 'translateX(0)' },
                { transform: `translateX(-${totalWidth}px)` }
            ], {
                duration: 30000,
                iterations: Infinity
            });
        }

        startAnimation();

        // Pausa a animação no hover
        track.addEventListener('mouseenter', () => {
            animation.pause();
        });

        track.addEventListener('mouseleave', () => {
            animation.play();
        });
    });
</script>
